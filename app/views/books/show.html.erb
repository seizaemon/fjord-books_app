<h1><%= t('views.common.title_show', name: Book.model_name.human) %></h1>

<p>
  <strong><%= Book.human_attribute_name(:title) %>:</strong>
  <%= @book.title %>
</p>

<p>
  <strong><%= Book.human_attribute_name(:memo) %>:</strong>
  <%= @book.memo %>
</p>

<p>
  <strong><%= Book.human_attribute_name(:author) %>:</strong>
  <%= @book.author %>
</p>

<p>
  <strong><%= Book.human_attribute_name(:picture) %>:</strong>
  <%= image_tag(@book.picture_url) if @book.picture.present? %>
</p>

<%= link_to t('views.common.edit'), edit_book_path(@book) %> |
<%= link_to t('views.common.back'), books_path %>

<hr>

<%= link_to 'New Comment', new_book_comment_path(@book) %>
<table>
  <thead>
    <tr>
      <th><%= Comment.human_attribute_name(:content) %></th>
      <th><%= User.human_attribute_name(:name) %></th>
      <th><%= Comment.human_attribute_name(:created_at) %></th>
      <th colspan="2"></th>
    </tr>
  </thead>
  <tbody>
    <% if @comments.count == 0 %>
      <tr>
        <td colspan="5">No comments yet</td>
      </tr>
    <% else %>
      <% @comments.each do |comment| %>
        <tr>
          <td><%= comment.content %></td>
          <td><%= comment.user.name %></td>
          <td><%= comment.created_at %></td>
          <td>
            <% if comment.user.id == current_user.id %>
              <%= link_to 'Edit', edit_book_comment_path(@book, comment) %>
            <% end %>
          </td>
              
          <td>
            <% if comment.user.id == current_user.id %>
              <%= link_to 'Delete', book_comment_path(@book, comment), method: :delete, data: { confirm: 'Can you delete this comment?' } %>
            <% end %>
          </td>
        </tr>
      <% end %>
    <% end %>
  </tbody>
</table>
